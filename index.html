<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›½é™…è´¸æ˜“å®åŠ¡ Â· æ²‰æµ¸å¼å¤ä¹ ç³»ç»Ÿ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary: #2980b9;
            --success: #27ae60;
            --danger: #c0392b;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0; /* ä¿®æ”¹ä¸º0ä»¥é€‚é…å…¨å±å°é¢ */
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* === å°é¢å±å¹• === */
        #cover-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 5000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: 20px; box-sizing: border-box;
        }

        .cover-title { font-size: 2rem; color: var(--primary); margin-bottom: 10px; font-weight: bold; }
        .cover-subtitle { font-size: 1rem; color: #7f8c8d; margin-bottom: 40px; }
        
        .instruction-box {
            background: #f8f9fa; border: 1px solid #eee; border-radius: 12px;
            padding: 20px; max-width: 500px; width: 100%; text-align: left; margin-bottom: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .instruction-box h3 { margin-top: 0; color: var(--dark); border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; }
        .inst-item { margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px; font-size: 0.95rem; color: #555; }
        .inst-icon { font-size: 1.2rem; min-width: 25px; }

        .btn-start {
            background: var(--gradient); color: white; border: none;
            padding: 15px 50px; font-size: 1.2rem; border-radius: 50px;
            cursor: pointer; font-weight: bold; box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
            transition: transform 0.2s;
        }
        .btn-start:hover { transform: scale(1.05); }
        .btn-start:active { transform: scale(0.95); }

        /* === ä¸»åº”ç”¨åŒºåŸŸ (é»˜è®¤éšè—) === */
        #app-container {
            display: none; /* JSæ§åˆ¶æ˜¾ç¤º */
            width: 100%; max-width: 600px;
            flex-direction: column; align-items: center;
            padding: 20px; box-sizing: border-box;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* é¡¶éƒ¨é¢æ¿ */
        .header-panel {
            width: 100%; background: white; padding: 15px 20px;
            border-radius: 12px; box-shadow: var(--shadow); margin-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center; box-sizing: border-box;
        }
        .header-panel h1 { margin: 0; font-size: 1.1rem; color: var(--primary); }
        
        .header-btns { display: flex; gap: 10px; }
        .btn-small { background: #eee; color: #555; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; transition: all 0.2s; }
        .btn-small:hover { background: #ddd; }
        .btn-exit { background: #ffeaea; color: var(--danger); }
        .btn-exit:hover { background: #fadbd8; }

        /* æ¨¡å¼åˆ‡æ¢ */
        .mode-switch { display: flex; gap: 10px; margin-bottom: 15px; width: 100%; justify-content: center; }
        .mode-btn { border: none; background: #e0e6ed; padding: 6px 15px; border-radius: 20px; cursor: pointer; color: #666; font-size: 0.9rem; font-weight: 500; }
        .mode-btn.active { background: var(--primary); color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        /* å¡ç‰‡å®¹å™¨ */
        .card-container {
            width: 100%; height: 450px;
            perspective: 1000px; margin-bottom: 20px; position: relative; cursor: pointer;
        }

        .card {
            width: 100%; height: 100%; position: relative; transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.4, 0.2, 0.2, 1);
            border-radius: 16px; box-shadow: var(--shadow);
        }

        .card.is-flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 16px; display: flex; flex-direction: column;
            align-items: center; padding: 30px; box-sizing: border-box; background: white;
            justify-content: space-between;
        }

        .card-front { border-top: 6px solid var(--primary); }
        .card-back { transform: rotateY(180deg); border-top: 6px solid var(--success); background: #fafafa; }

        /* å†…å®¹åŒºåŸŸ */
        .card-body {
            flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;
            width: 100%; text-align: center;
        }

        .tag-row { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .tag { font-size: 0.75rem; padding: 3px 8px; border-radius: 4px; background: #eee; color: #666; }
        .tag.level-1 { background: #fff8e1; color: #f39c12; border: 1px solid #f39c12; }
        .tag.wrong-mark { background: #fee; color: var(--danger); border: 1px solid var(--danger); }
        
        .front-text { font-size: 1.5rem; font-weight: 600; line-height: 1.4; color: #2c3e50; }
        .back-text { font-size: 1.15rem; line-height: 1.6; text-align: left; width: 100%; color: #444; }

        /* å¼ºåŒ–æŒ‰é’® */
        .btn-exercise {
            background: var(--gradient);
            color: white; border: none; padding: 10px 25px; border-radius: 30px;
            cursor: pointer; font-weight: bold; box-shadow: 0 4px 10px rgba(118, 75, 162, 0.3);
            transition: transform 0.2s; display: flex; align-items: center; gap: 8px; font-size: 0.95rem;
        }
        .btn-exercise:hover { transform: translateY(-2px); }
        .btn-exercise:active { transform: scale(0.95); }

        /* åº•éƒ¨å¯¼èˆª */
        .nav-bar { display: flex; gap: 10px; width: 100%; flex-wrap: wrap; }
        .nav-btn {
            flex: 1; padding: 15px; border: none; border-radius: 10px; cursor: pointer;
            font-weight: bold; background: white; color: #555; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.2s; white-space: nowrap;
        }
        .nav-btn.wrong { color: var(--danger); border: 1px solid #fadbd8; background: #fff5f5; flex: 1.5; }
        .nav-btn.correct { color: var(--success); border: 1px solid #d4efdf; background: #f0fdf4; flex: 1.5; }
        .nav-btn.next { color: var(--primary); border: 1px solid #d6eaf8; background: #eaf2f8; flex: 1; }
        .nav-btn:active { transform: scale(0.98); }

        /* å¼ºåŒ–ç»ƒä¹ æ¨¡æ€æ¡† */
        .quiz-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;
        }
        .quiz-content {
            background: white; width: 90%; max-width: 550px; border-radius: 12px;
            padding: 25px; position: relative; animation: slideUp 0.3s ease;
        }
        .quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; }
        .quiz-type { font-size: 0.85rem; font-weight: bold; color: white; padding: 2px 8px; border-radius: 4px; }
        .type-calc { background: #9b59b6; } .type-case { background: #e67e22; } .type-choice { background: #3498db; } 
        .quiz-q-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 20px; line-height: 1.5; }
        .quiz-options { display: flex; flex-direction: column; gap: 10px; }
        .opt-btn { text-align: left; background: #f8f9fa; border: 1px solid #e9ecef; padding: 12px; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .opt-btn:hover { background: #e2e6ea; }
        .opt-btn.correct { background: #d4edda; border-color: #c3e6cb; color: #155724; }
        .opt-btn.wrong { background: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .quiz-result { margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 8px; display: none; font-size: 0.95rem; line-height: 1.5; }
        .close-quiz { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; cursor: pointer; color: #999; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* æŠ¥å‘Šæ¨¡æ€æ¡† */
        .report-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 3000; justify-content: center; align-items: center; }
        .report-content { background: white; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; padding: 30px; border-radius: 12px; position: relative; }
        .report-stat-row { display: flex; justify-content: space-around; margin: 20px 0; }
        .stat-box { text-align: center; }
        .stat-num { font-size: 1.8rem; font-weight: bold; color: var(--primary); }
        .wrong-list { margin-top: 15px; border-top: 1px solid #eee; padding-top: 15px; }
        .wrong-item { background: #fff5f5; padding: 8px; margin-bottom: 5px; border-radius: 4px; border-left: 3px solid var(--danger); font-size: 0.9rem; display: flex; justify-content: space-between; }

    </style>
</head>
<body>

    <div id="cover-screen">
        <h1 class="cover-title">å›½é™…è´¸æ˜“å®åŠ¡ Â· å¤ä¹ ç³»ç»Ÿ</h1>
        <div class="cover-subtitle">åŸºäºæœŸæœ«æ ¸å¿ƒè€ƒç‚¹å®šåˆ¶</div>

        <div class="instruction-box">
            <h3>ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
            <div class="inst-item">
                <span class="inst-icon">ğŸ‘†</span>
                <span><b>ç‚¹å‡»å¡ç‰‡</b>ï¼šæŸ¥çœ‹èƒŒé¢çš„ç­”æ¡ˆè§£æã€‚</span>
            </div>
            <div class="inst-item">
                <span class="inst-icon">ğŸ¯</span>
                <span><b>å¼ºåŒ–ç»ƒä¹ </b>ï¼šç‚¹å‡»å¡ç‰‡ä¸Šçš„â€œå¼ºåŒ–ç»ƒä¹ â€æŒ‰é’®ï¼Œåšé¢˜åŠ æ·±ç†è§£ã€‚</span>
            </div>
            <div class="inst-item">
                <span class="inst-icon">ğŸ“Š</span>
                <span><b>é”™é¢˜æœºåˆ¶</b>ï¼šå¦‚æœâ€œç­”é”™äº†â€æˆ–å¼ºåŒ–é¢˜â€œåšé”™äº†â€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•ï¼Œå¯åœ¨é”™é¢˜æ¨¡å¼ä¸‹é‡ç»ƒã€‚</span>
            </div>
            <div class="inst-item">
                <span class="inst-icon">â©</span>
                <span><b>ä¸‹ä¸€å¼ </b>ï¼šå¦‚æœä¸ç¡®å®šï¼Œå¯ä»¥å…ˆè·³è¿‡ï¼Œç¨åå†çœ‹ã€‚</span>
            </div>
        </div>

        <button class="btn-start" onclick="startGame()">å¼€å§‹æŒ‘æˆ˜ ğŸš€</button>
    </div>

    <div id="app-container">
        
        <div class="header-panel">
            <div>
                <h1 style="margin-bottom:5px">æ ¸å¿ƒè€ƒç‚¹æŠ½è®¤å¡</h1>
                <div style="font-size:0.8rem;color:#777" id="progress-text">è¿›åº¦ï¼š1 / 40</div>
            </div>
            <div class="header-btns">
                <button class="btn-small btn-report" onclick="showReport()">ğŸ“Š æŠ¥å‘Š</button>
                <button class="btn-small btn-exit" onclick="exitGame()">ğŸšª é€€å‡º</button>
            </div>
        </div>

        <div class="mode-switch">
            <button class="mode-btn active" onclick="setMode('ordered')" id="m-ordered">é¡ºåºåˆ·å¡</button>
            <button class="mode-btn" onclick="setMode('random')" id="m-random">ğŸ² éšæœºæŠ½å¡</button>
            <button class="mode-btn" onclick="setMode('review')" id="m-review">ğŸ”¥ é”™é¢˜é‡ç»ƒ</button>
        </div>

        <div class="card-container" onclick="flipCard()">
            <div class="card" id="flashcard">
                </div>
        </div>

        <div class="nav-bar">
            <button class="nav-btn wrong" onclick="nextCard(false)">ğŸ˜µ ç­”é”™äº†</button>
            <button class="nav-btn next" onclick="nextCard(null)">â© ä¸‹ä¸€å¼ </button>
            <button class="nav-btn correct" onclick="nextCard(true)">ğŸ˜ å·²æŒæ¡</button>
        </div>

    </div>

    <div class="quiz-modal" id="quiz-modal">
        <div class="quiz-content">
            <span class="close-quiz" onclick="closeQuiz()">&times;</span>
            <div class="quiz-header">
                <span style="font-weight:bold;color:#555">å¼ºåŒ–ç»ƒä¹ </span>
                <span class="quiz-type" id="quiz-badge">ç±»å‹</span>
            </div>
            <div class="quiz-q-text" id="quiz-question">é¢˜ç›®åŠ è½½ä¸­...</div>
            <div class="quiz-options" id="quiz-options">
                </div>
            <div class="quiz-result" id="quiz-feedback">
                </div>
        </div>
    </div>

    <div class="report-modal" id="report-modal">
        <div class="report-content">
            <span class="close-quiz" onclick="document.getElementById('report-modal').style.display='none'">&times;</span>
            <div id="pdf-area">
                <h2 style="text-align:center;border-bottom:1px solid #eee;padding-bottom:10px">å­¦ä¹ è¿›åº¦æŠ¥å‘Š</h2>
                <div class="report-stat-row">
                    <div class="stat-box">
                        <div class="stat-num" id="r-total">0</div>
                        <div>å·²å¤ä¹ </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-num" id="r-wrong" style="color:var(--danger)">0</div>
                        <div>éœ€é‡ç‚¹å¤ä¹ </div>
                    </div>
                </div>
                <h3>ğŸ”´ é”™é¢˜åˆ—è¡¨ (éœ€é‡ç‚¹å¤ä¹ )</h3>
                <div id="r-wrong-list" class="wrong-list">
                    </div>
            </div>
            <button class="nav-btn correct" style="width:100%;margin-top:20px" onclick="exportPDF()">ğŸ“¥ å¯¼å‡º PDF</button>
        </div>
    </div>

    <script>
        // ================= å®Œæ•´æ•°æ® (40æ¡) =================
        const db = [
             { id: 1, level: 1, chapter: "ç¬¬äºŒç«  å•†å“æ•°é‡", type: "choice", front: "æ•°é‡æœºåŠ¨å¹…åº¦ (Quantity Tolerance)", back: "å®šä¹‰ï¼šå–æ–¹æœ‰æƒæŒ‰ä¸€å®šæ¯”ä¾‹å¤šäº¤æˆ–å°‘äº¤è´§ç‰©ã€‚<br>ä¾‹ï¼šâ€œå…è®¸æº¢çŸ­è£…5%ï¼Œç”±å–æ–¹å†³å®šâ€ã€‚", quiz: { q: "åˆåŒè§„å®šâ€œæº¢çŸ­è£…5%ï¼Œç”±ä¹°æ–¹å†³å®šâ€ã€‚åœ¨FOBæ¡ä»¶ä¸‹ï¼Œä¹°æ–¹ä¸ºäº†åˆ©ç”¨èˆ±ä½ï¼Œæå¯èƒ½ï¼š", options: ["è¦æ±‚å–æ–¹å¤šè£…", "è¦æ±‚å–æ–¹å°‘è£…", "åªç§Ÿæ°å¥½èƒ½è£…åˆåŒæ•°é‡çš„èˆ¹ï¼Œå¯¼è‡´å–æ–¹æ— æ³•æº¢è£…", "æ”¾å¼ƒé€‰æ‹©æƒ"], ans: 2, explain: "è‹¥ç”±ä¹°æ–¹å†³å®šä¸”ä¹°æ–¹æ´¾èˆ¹(FOB)ï¼Œä»–å¯èƒ½ç§Ÿä¸€è‰˜ä¸¥æ ¼é™åˆ¶è½½é‡çš„èˆ¹ï¼Œå‰¥å¤ºå–æ–¹æº¢çŸ­è£…çµæ´»æ€§ï¼Œå¯¹å–æ–¹ä¸åˆ©ã€‚" } },
             { id: 2, level: 1, chapter: "ç¬¬äºŒç«  å•†å“æ•°é‡", type: "choice", front: "æº¢çŸ­è£…æ¡æ¬¾é€‰æ‹©æƒå½’å±", back: "é€šå¸¸ç”±**å–æ–¹**å†³å®šï¼ˆå°¤å…¶æ˜¯å–æ–¹å®‰æ’è¿è¾“æ—¶ï¼‰ã€‚<br>æ³¨ï¼šè‹¥åˆåŒæœªè§„å®šï¼ŒUCP600 è§„å®šçº¦é‡å…è®¸ 10% å¹…åº¦ã€‚", quiz: { q: "å¦‚æœåˆåŒä¸­æœªæ˜ç¡®è§„å®šæº¢çŸ­è£…æ¯”ä¾‹å’Œé€‰æ‹©æƒï¼Œæ ¹æ®UCP600ï¼Œå¯¹äºâ€œçº¦â€é‡ï¼ˆaboutï¼‰çš„è§£é‡Šæ˜¯å…è®¸å¤šå°‘å¹…åº¦çš„å¢å‡ï¼Ÿ", options: ["5%", "10%", "15%", "3%"], ans: 1, explain: "UCP600è§„å®šï¼Œ'about'æˆ–'approximate'ç”¨äºä¿¡ç”¨è¯é‡‘é¢ã€æ•°é‡æˆ–å•ä»·æ—¶ï¼Œè§£é‡Šä¸ºå…è®¸æœ‰10%çš„å¢å‡ã€‚" } },
             { id: 3, level: 1, chapter: "ç¬¬å››ç«  ä»·æ ¼æ ¸ç®—", type: "calc", front: "å‡ºå£æ¢æ±‡æˆæœ¬è®¡ç®—å…¬å¼", back: "å‡ºå£æ¢æ±‡æˆæœ¬ = å‡ºå£æ€»æˆæœ¬(äººæ°‘å¸) / å‡ºå£å¤–æ±‡å‡€æ”¶å…¥(ç¾å…ƒ)ã€‚<br>æ³¨æ„ï¼šåˆ†æ¯æ˜¯æ‰£é™¤è¿ä¿ä½£åçš„ **FOB å‡€ä»·**ã€‚", quiz: { q: "å‡ºå£å•†å“æ€»æˆæœ¬11700å…ƒäººæ°‘å¸ï¼ˆå«ç¨ï¼‰ï¼Œå‡ºå£æŠ¥ä»·CIF USD 2000ï¼Œè¿è´¹200ï¼Œä¿è´¹20ã€‚å½“å¤©æ±‡ç‡1:6.5ã€‚æ±‚æ¢æ±‡æˆæœ¬ã€‚", options: ["6.57", "6.50", "6.18", "5.85"], ans: 0, explain: "å¤–æ±‡å‡€æ”¶å…¥(FOB) = 2000 - 200 - 20 = 1780ç¾å…ƒã€‚æ¢æ±‡æˆæœ¬ = 11700 / 1780 â‰ˆ 6.57ã€‚" } },
             { id: 4, level: 1, chapter: "ç¬¬å››ç«  ä»·æ ¼æ ¸ç®—", type: "calc", front: "å‡ºå£ç›ˆäºç‡è®¡ç®—å…¬å¼", back: "å‡ºå£ç›ˆäºç‡ = (å‡ºå£é”€å”®äººæ°‘å¸å‡€æ”¶å…¥ - å‡ºå£æ€»æˆæœ¬) / å‡ºå£æ€»æˆæœ¬ Ã— 100%ã€‚", quiz: { q: "å‡ºå£æ€»æˆæœ¬100ä¸‡äººæ°‘å¸ï¼Œå‡ºå£é”€å”®å¤–æ±‡å‡€æ”¶å…¥15ä¸‡ç¾å…ƒï¼Œæ±‡ç‡1:7.0ã€‚æ±‚å‡ºå£ç›ˆäºç‡ã€‚", options: ["5%", "50%", "10%", "äºæŸ"], ans: 0, explain: "äººæ°‘å¸å‡€æ”¶å…¥=15ä¸‡*7.0=105ä¸‡ã€‚ç›ˆäºç‡=(105-100)/100 = 5%ã€‚" } },
             { id: 5, level: 1, chapter: "ç¬¬äº”ç«  è´§ç‰©è¿è¾“", type: "calc", front: "ç­è½®è¿è´¹è®¡æ”¶æ ‡å‡† W/M", back: "W/M (Weight or Measurement) è¡¨ç¤ºæŒ‰å•†å“çš„**æ¯›é‡**æˆ–**ä½“ç§¯**ä¸­è¾ƒé«˜çš„ä¸€é¡¹æ¥è®¡ç®—è¿è´¹ï¼ˆæ‹©å¤§è®¡æ”¶ï¼‰ã€‚", quiz: { q: "è´§ç‰©æ¯›é‡2å¨ï¼Œä½“ç§¯3ç«‹æ–¹ç±³ã€‚è¿è´¹æ ‡å‡†W/Mï¼ŒåŸºæœ¬è´¹ç‡USD 100ã€‚æ€»è¿è´¹ä¸ºï¼š", options: ["USD 200", "USD 300", "USD 250", "USD 500"], ans: 1, explain: "3(ä½“ç§¯) > 2(é‡é‡)ï¼ŒæŒ‰ä½“ç§¯ç®—ã€‚3 * 100 = 300ã€‚" } },
             { id: 6, level: 1, chapter: "ç¬¬äº”ç«  è´§ç‰©è¿è¾“", type: "choice", front: "UCP600 åˆ†æ‰¹è£…è¿è§„å®š", back: "é™¤éä¿¡ç”¨è¯å¦æœ‰è§„å®šï¼Œå¦åˆ™**å…è®¸**åˆ†æ‰¹è£…è¿å’Œè½¬è¿ã€‚", quiz: { q: "ä¿¡ç”¨è¯æœªè§„å®šâ€œåˆ†æ‰¹è£…è¿â€æ¡æ¬¾ã€‚å–æ–¹å°†è´§ç‰©åˆ†ä¸¤æ‰¹å‡ºè¿ï¼Œé“¶è¡Œèƒ½å¦æ‹’ä»˜ï¼Ÿ", options: ["èƒ½ï¼Œé»˜è®¤ä¸ºç¦æ­¢", "ä¸èƒ½ï¼Œé»˜è®¤ä¸ºå…è®¸", "å–å†³äºä¹°æ–¹æ„æ„¿", "éœ€è¦å¼€è¯è¡Œç¡®è®¤"], ans: 1, explain: "æ ¹æ®UCP600ï¼Œæœªè§„å®šå³è§†ä¸ºå…è®¸(Allowed)ã€‚" } },
             { id: 7, level: 1, chapter: "ç¬¬äºŒç«  å•†å“", type: "choice", front: "é‡é‡è®¡é‡æƒ¯ä¾‹", back: "è‹¥åˆåŒæœªè§„å®šï¼Œæƒ¯ä¾‹æŒ‰ **å‡€é‡ (Net Weight)** è®¡ä»·ã€‚", quiz: { q: "æŸå•†å“å•ä»·ä¸ºâ€œ$1000/MTâ€ï¼ŒåˆåŒæœªè§„å®šæ¯›å‡€é‡ã€‚å–æ–¹äº¤è´§æ¯›é‡10å¨ï¼Œçš®é‡1å¨ã€‚ä¹°æ–¹åº”ä»˜å¤šå°‘é’±ï¼Ÿ", options: ["10000", "9000", "9500", "æ‹’ä»˜"], ans: 1, explain: "æŒ‰å‡€é‡è®¡ä»·ã€‚å‡€é‡=10-1=9å¨ã€‚åº”ä»˜ 9 * 1000 = 9000ã€‚" } },
             { id: 8, level: 1, chapter: "ç¬¬äºŒç«  å•†å“", type: "calc", front: "å…¬é‡ (Conditioned Weight) å…¬å¼", back: "å…¬å¼ï¼šå…¬é‡ = å®é™…é‡é‡ Ã— (1 + æ ‡å‡†å›æ½®ç‡) / (1 + å®é™…å›æ½®ç‡)ã€‚<br>é€‚ç”¨äºï¼šç”Ÿä¸ã€ç¾Šæ¯›ç­‰å¸æ¹¿æ€§å¼ºçš„å•†å“ã€‚", quiz: { q: "å®é™…é‡é‡10å¨ï¼Œå®é™…å›æ½®ç‡20%ï¼ˆå¾ˆæ¹¿ï¼‰ï¼Œæ ‡å‡†å›æ½®ç‡10%ã€‚å…¬é‡åº”ä¸ºï¼š", options: ["å¤§äº10å¨", "ç­‰äº10å¨", "å°äº10å¨", "æ— æ³•è®¡ç®—"], ans: 2, explain: "è´§ç‰©å«æ°´è¶…æ ‡(20%>10%)ï¼Œæœ‰æ•ˆé‡é‡å‡å°‘ã€‚å…¬é‡ = 10 * 1.1 / 1.2 â‰ˆ 9.17å¨ã€‚" } },
             { id: 9, level: 1, chapter: "ç¬¬äºŒç«  å•†å“", type: "choice", front: "è¿è¾“æ ‡å¿— (å”›å¤´)", back: "ä½œç”¨ï¼šä¾¿äºè¯†åˆ«è´§ç‰©ã€é˜²æ­¢é”™å‘é”™è¿ã€‚<br>å†…å®¹ï¼šæ”¶è´§äººä»£å·ã€å‚è€ƒå·ã€ç›®çš„åœ°ã€ä»¶å·ã€‚", quiz: { q: "æ ‡å‡†å”›å¤´é€šå¸¸ä¸åŒ…å«ä»¥ä¸‹å“ªé¡¹å†…å®¹ï¼Ÿ", options: ["ç›®çš„åœ°", "æ”¶è´§äººä»£å·", "ä»¶å·", "å•†å“ä»·æ ¼"], ans: 3, explain: "å”›å¤´æ˜¯ä¸ºäº†è¿è¾“è¯†åˆ«ï¼Œä»·æ ¼æ˜¯å•†ä¸šæ•æ„Ÿä¿¡æ¯ï¼Œé€šå¸¸ä¸å°åœ¨åŒ…è£…å¤–ã€‚" } },
             { id: 10, level: 1, chapter: "ç¬¬äºŒç«  å•†å“", type: "choice", front: "ä¸­æ€§åŒ…è£… (Neutral Packing)", back: "å®šä¹‰ï¼šåŒ…è£…ä¸Šæ— ç”Ÿäº§å›½åˆ«ã€åœ°åã€å‚åã€‚<br>ç›®çš„ï¼šæ‰“ç ´è´¸æ˜“å£å’ã€é€‚åº”è½¬å£è´¸æ˜“ã€‚", quiz: { q: "åœ¨å®šç‰Œä¸­æ€§åŒ…è£…ä¸­ï¼ŒåŒ…è£…ä¸Šå¯ä»¥å‡ºç°ï¼š", options: ["Made in China", "ä¹°æ–¹æŒ‡å®šçš„å•†æ ‡", "å–æ–¹å‚å", "å‡ºå£å•†åœ°å€"], ans: 1, explain: "å®šç‰Œä¸­æ€§=ä¹°æ–¹å•†æ ‡+æ— å›½åˆ«æ— å‚åã€‚" } },
             { id: 11, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "case", front: "FOB é£é™©è½¬ç§»ç‚¹", back: "è£…è¿æ¸¯è´§ç‰© **è£…ä¸Šèˆ¹ (On board)** æ—¶è½¬ç§»ã€‚", quiz: { q: "FOBä¸‹ï¼Œè´§ç‰©åœ¨åŠè£…å…¥èˆ¹èˆ±è¿‡ç¨‹ä¸­ï¼Œæ‰è½åœ¨ç”²æ¿ä¸Šæ‘”åã€‚æŸå¤±ç”±è°æ‰¿æ‹…ï¼Ÿ", options: ["ä¹°æ–¹", "å–æ–¹", "èˆ¹æ–¹", "ä¿é™©å…¬å¸"], ans: 1, explain: "FOBé£é™©ç•Œé™ä¸ºâ€œè£…ä¸Šèˆ¹â€ã€‚è´§ç‰©æ‰åœ¨ç”²æ¿ä¸Šï¼Œå°šæœªå®Œæˆäº¤è´§ï¼Œé£é™©æœªè½¬ç§»ï¼Œç”±å–æ–¹æ‰¿æ‹…ã€‚" } },
             { id: 12, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "choice", front: "FOB ä¹°å–åŒæ–¹è´£ä»»", back: "ä¹°æ–¹ï¼šç§Ÿèˆ¹è®¢èˆ±ã€æ”¯ä»˜è¿è´¹ã€åŠç†ä¿é™©ã€‚<br>å–æ–¹ï¼šè£…èˆ¹ã€åŠç†å‡ºå£æ‰‹ç»­ã€å‘å‡ºè£…èˆ¹é€šçŸ¥ã€‚", quiz: { q: "FOBæ¡ä»¶ä¸‹ï¼Œç§Ÿèˆ¹è®¢èˆ±é€šå¸¸ç”±è°è´Ÿè´£ï¼Ÿ", options: ["å–æ–¹", "ä¹°æ–¹", "è´§ä»£", "èˆ¹å…¬å¸"], ans: 1, explain: "FOBä¸­ï¼Œä¹°æ–¹è´Ÿè´£æ´¾èˆ¹æ¥è´§ï¼ˆç§Ÿèˆ¹è®¢èˆ±ï¼‰ã€‚" } },
             { id: 13, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "choice", front: "CIF äº¤è´§æ€§è´¨", back: "è±¡å¾æ€§äº¤è´§ (Symbolic Delivery)ã€‚<br>å–æ–¹å‡­å•äº¤è´§ï¼Œä¹°æ–¹å‡­å•ä»˜æ¬¾ã€‚", quiz: { q: "CIFä¸‹ï¼Œå–æ–¹æäº¤äº†åˆæ ¼å•æ®ï¼Œä½†è´§ç‰©åœ¨è¿è¾“é€”ä¸­ç­å¤±ã€‚ä¹°æ–¹èƒ½å¦æ‹’ä»˜ï¼Ÿ", options: ["èƒ½", "ä¸èƒ½", "çœ‹åˆåŒé‡‘é¢", "çœ‹å¿ƒæƒ…"], ans: 1, explain: "CIFæ˜¯å‡­å•äº¤è´§ã€‚å•æ®åˆæ ¼ï¼Œä¹°æ–¹å¿…é¡»ä»˜æ¬¾ï¼Œä¹‹åå‡­ä¿å•å‘ä¿é™©å…¬å¸ç´¢èµ”ã€‚" } },
             { id: 14, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "choice", front: "CIF ä¿é™©ä¹‰åŠ¡", back: "å–æ–¹æœ‰ä¹‰åŠ¡æŠ•ä¿ï¼Œé€šå¸¸æŒ‰æœ€ä½é™©åˆ«ï¼ˆå¹³å®‰é™©/ICC(C)ï¼‰ï¼Œä¿é¢ä¸º CIFä»· Ã— 110%ã€‚", quiz: { q: "CIFåˆåŒæœªè§„å®šé™©åˆ«ï¼Œå–æ–¹æŠ•ä¿äº†å¹³å®‰é™©ã€‚ä¹°æ–¹æ”¶åˆ°è´§åå‘ç°éƒ¨åˆ†è´§ç‰©è¢«å·ï¼Œä¿é™©å…¬å¸æ‹’èµ”ã€‚ä¹°æ–¹èƒ½å¦å‘å–æ–¹ç´¢èµ”ï¼Ÿ", options: ["èƒ½ï¼Œå–æ–¹åº”ä¿ä¸€åˆ‡é™©", "ä¸èƒ½ï¼Œå–æ–¹å·²å±¥è¡Œæœ€ä½æŠ•ä¿ä¹‰åŠ¡", "èƒ½ï¼Œå› ä¸ºè´§ç‰©æ˜¯åœ¨é€”ä¸­ä¸¢çš„", "ä¸èƒ½ï¼Œå› ä¸ºæ˜¯å°å·çš„é”™"], ans: 1, explain: "CIFä¸‹å–æ–¹åªéœ€æŠ•ä¿æœ€ä½é™©åˆ«ï¼ˆå¹³å®‰é™©ï¼‰ã€‚å·çªƒå±ä¸€èˆ¬å¤–æ¥é£é™©ï¼Œå¹³å®‰é™©ä¸èµ”ã€‚å–æ–¹æ— è¿‡é”™ã€‚" } },
             { id: 15, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "case", front: "CFR å–æ–¹é€šçŸ¥ä¹‰åŠ¡", back: "è´§ç‰©è£…èˆ¹åå¿…é¡»åŠæ—¶å‘å‡º **è£…èˆ¹é€šçŸ¥**ï¼Œå¦åˆ™è¿è¾“é€”ä¸­çš„é£é™©å°†å›è½¬ç»™å–æ–¹ã€‚", quiz: { q: "CFRä¸‹ï¼Œå–æ–¹æ¼å‘è£…èˆ¹é€šçŸ¥ï¼Œå¯¼è‡´ä¹°æ–¹æœªåŠæ—¶æŠ•ä¿ã€‚èˆ¹æ²‰äº†ã€‚æŸå¤±ç”±è°æ‹…ï¼Ÿ", options: ["ä¹°æ–¹", "å–æ–¹", "èˆ¹å…¬å¸", "åˆ†æ‘Š"], ans: 1, explain: "å› å–æ–¹è¿‡å¤±å¯¼è‡´ä¹°æ–¹æ¼ä¿ï¼Œé£é™©å›è½¬ç»™å–æ–¹æ‰¿æ‹…ã€‚" } },
             { id: 16, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "choice", front: "FCA ä¸ FOB åŒºåˆ«", back: "FCA é€‚ç”¨äºä»»ä½•è¿è¾“æ–¹å¼ï¼Œé£é™©åœ¨ **è´§äº¤æ‰¿è¿äºº** æ—¶è½¬ç§»ï¼›<br>FOB ä»…ç”¨äºæ°´è¿ï¼Œé£é™©åœ¨è£…ä¸Šèˆ¹æ—¶è½¬ç§»ã€‚", quiz: { q: "è´§ç‰©ä»è‹å·å·¥å‚è¿å¾€ä¸Šæµ·æ¸¯è£…èˆ¹ã€‚ä¸ºè§„é¿å†…é™†è¿è¾“é£é™©ï¼Œå–æ–¹æœ€å¥½é€‰ï¼š", options: ["FOB Shanghai", "FCA Suzhou", "CIF New York", "CFR London"], ans: 1, explain: "FCA Suzhouä¸‹ï¼Œè´§äº¤è‹å·æ‰¿è¿äººé£é™©å³è½¬ç§»ï¼Œå†…é™†é£é™©å½’ä¹°æ–¹ã€‚FOBè¦ç­‰åˆ°ä¸Šæµ·è£…èˆ¹æ‰è½¬ç§»ã€‚" } },
             { id: 17, level: 1, chapter: "ç¬¬ä¸‰ç«  æœ¯è¯­", type: "choice", front: "EXW (å·¥å‚äº¤è´§)", back: "å–æ–¹æ‰¿æ‹…è´£ä»»ã€è´¹ç”¨ã€é£é™© **æœ€å°** çš„æœ¯è¯­ã€‚<br>å–æ–¹ä¸è´Ÿè´£è£…è´§å’Œå‡ºå£æ¸…å…³ã€‚", quiz: { q: "EXWæœ¯è¯­ä¸‹ï¼Œå‡ºå£æŠ¥å…³æ‰‹ç»­ç”±è°åŠç†ï¼Ÿ", options: ["å–æ–¹", "ä¹°æ–¹", "æµ·å…³", "å…æŠ¥å…³"], ans: 1, explain: "EXWæ˜¯å”¯ä¸€ç”±ä¹°æ–¹åŠç†å‡ºå£æ¸…å…³çš„æœ¯è¯­ã€‚" } },
             { id: 18, level: 1, chapter: "ç¬¬å››ç«  ä»·æ ¼", type: "calc", front: "CIF ä»·æ¢ç®—å…¬å¼", back: "CIF = (FOB + è¿è´¹) / (1 - æŠ•ä¿åŠ æˆ Ã— ä¿é™©è´¹ç‡)ã€‚", quiz: { q: "FOB 1000, è¿è´¹ 100, æŠ•ä¿åŠ æˆ10%, ä¿è´¹ç‡1%ã€‚æ±‚CIFä»·ã€‚", options: ["1112", "1100", "1111", "1123"], ans: 2, explain: "CIF = (1000+100) / (1 - 1.1*0.01) = 1100 / 0.989 â‰ˆ 1112.2ã€‚å…¬å¼é€»è¾‘ï¼šCIF = CFR + ä¿è´¹ã€‚" } },
             { id: 19, level: 1, chapter: "ç¬¬äº”ç«  è¿è¾“", type: "choice", front: "ç­è½®è¿è¾“ç‰¹ç‚¹", back: "â€œå››å›ºå®šâ€ï¼ˆèˆªçº¿ã€æ¸¯å£ã€èˆ¹æœŸã€è´¹ç‡ï¼‰ï¼›â€œä¸€è´Ÿè´£â€ï¼ˆç®¡è£…ç®¡å¸ï¼‰ã€‚", quiz: { q: "ç­è½®è¿è¾“ä¸­ï¼Œæ»æœŸè´¹å’Œé€Ÿé£è´¹é€šå¸¸ï¼š", options: ["è®¡ç®—", "ä¸è®¡ç®—", "çœ‹èˆ¹é•¿å¿ƒæƒ…", "åªç®—æ»æœŸè´¹"], ans: 1, explain: "ç­è½®ç®¡è£…ç®¡å¸ï¼Œä¸è®¡ç®—æ»æœŸé€Ÿé£è´¹ã€‚ç§Ÿèˆ¹è¿è¾“æ‰ç®—ã€‚" } },
             { id: 20, level: 1, chapter: "ç¬¬äº”ç«  è¿è¾“", type: "choice", front: "èˆªç©ºè¿å• (AWB) æ€§è´¨", back: "**ä¸æ˜¯** ç‰©æƒå‡­è¯ï¼Œ**ä¸å¯** èƒŒä¹¦è½¬è®©ï¼Œå¿…é¡»è®°åã€‚", quiz: { q: "è‹¥æƒ³åœ¨è´§ç‰©è¿è¾“é€”ä¸­è½¬å–ï¼Œåº”ä½¿ç”¨å“ªç§å•æ®ï¼Ÿ", options: ["èˆªç©ºè¿å•", "æµ·è¿æŒ‡ç¤ºæå•", "æµ·è¿è®°åæå•", "é“è·¯è¿å•"], ans: 1, explain: "åªæœ‰æµ·è¿æŒ‡ç¤ºæå•æ˜¯ç‰©æƒå‡­è¯ï¼Œå¯èƒŒä¹¦è½¬è®©ã€‚" } },
             { id: 21, level: 1, chapter: "ç¬¬äº”ç«  è¿è¾“", type: "choice", front: "æµ·è¿æå• (B/L) æ€§è´¨", back: "1. è´§ç‰©æ”¶æ®ï¼›<br>2. è¿è¾“å¥‘çº¦è¯æ˜ï¼›<br>3. **ç‰©æƒå‡­è¯**ï¼ˆæ ¸å¿ƒï¼‰ã€‚", quiz: { q: "æµ·è¿æå•åŒºåˆ«äºç©ºè¿å•ã€é“è·¯å•çš„æ ¸å¿ƒæ€§è´¨æ˜¯ï¼š", options: ["æ˜¯è´§ç‰©æ”¶æ®", "æ˜¯è¿è¾“åˆåŒè¯æ˜", "æ˜¯ç‰©æƒå‡­è¯", "æ˜¯æŠ¥å…³å•æ®"], ans: 2, explain: "ç‰©æƒå‡­è¯ (Document of Title) æ˜¯B/Lç‹¬æœ‰çš„ï¼Œä»£è¡¨è´§æƒã€‚" } },
             { id: 22, level: 1, chapter: "ç¬¬äº”ç«  è¿è¾“", type: "choice", front: "æŒ‡ç¤ºæå• (Order B/L)", back: "æ”¶è´§äººå†™ â€œTo Orderâ€ï¼Œéœ€ç» **èƒŒä¹¦** è½¬è®©ï¼Œæµè½¬æ€§æœ€å¼ºã€‚", quiz: { q: "æ”¶è´§äººä¸€æ å¡«å†™â€œTo Orderâ€çš„æå•ï¼Œè½¬è®©æ—¶éœ€è¦ï¼š", options: ["æ— é¡»æ‰‹ç»­", "ç»èƒŒä¹¦(Endorsement)", "é€šçŸ¥èˆ¹å…¬å¸", "é‡æ–°ç­¾å‘"], ans: 1, explain: "æŒ‡ç¤ºæå•éœ€ç»èƒŒä¹¦æ‰èƒ½è½¬è®©ã€‚" } },
             { id: 23, level: 1, chapter: "ç¬¬å…­ç«  ä¿é™©", type: "case", front: "å…±åŒæµ·æŸ vs å•ç‹¬æµ·æŸ", back: "GAï¼šä¸ºäº†å…±åŒå®‰å…¨ã€**æœ‰æ„** é‡‡å–æªæ–½ï¼Œå„æ–¹åˆ†æ‘Šã€‚<br>PAï¼šé£é™© **ç›´æ¥** å¯¼è‡´çš„æ„å¤–æŸå¤±ï¼Œå•ç‹¬æ‰¿æ‹…ã€‚", quiz: { q: "èˆ¹èˆ±èµ·ç«(A)ï¼Œèˆ¹é•¿ä¸‹ä»¤çŒæ°´æ•‘ç«(B)ã€‚Aå’ŒBåˆ†åˆ«æ˜¯ï¼š", options: ["PA, GA", "GA, PA", "PA, PA", "GA, GA"], ans: 0, explain: "ç«çƒ§æ˜¯æ„å¤–(PA)ï¼ŒçŒæ°´æ˜¯äººä¸ºæ–½æ•‘(GA)ã€‚" } },
             { id: 24, level: 1, chapter: "ç¬¬å…­ç«  ä¿é™©", type: "choice", front: "å¹³å®‰é™© (FPA) è´£ä»»", back: "è´£ä»»æœ€å°ã€‚èµ”å…¨æŸã€å…±åŒæµ·æŸã€æ„å¤–äº‹æ•…é€ æˆçš„PAã€‚<br>**ä¸èµ”** è‡ªç„¶ç¾å®³é€ æˆçš„PAã€‚", quiz: { q: "å¹³å®‰é™©ä¸èµ”å¿ä¸‹åˆ—å“ªç§æŸå¤±ï¼Ÿ", options: ["èˆ¹èˆ¶ç¢°æ’é€ æˆçš„è´§ç‰©ç ´ç¢", "å…±åŒæµ·æŸ", "æµ·æ°´æµ¸æ³¡å¯¼è‡´çš„éƒ¨åˆ†æ¹¿æŸï¼ˆè‡ªç„¶ç¾å®³ï¼‰", "è´§ç‰©å…¨æŸ"], ans: 2, explain: "å¹³å®‰é™©ä¸èµ”â€œè‡ªç„¶ç¾å®³é€ æˆçš„å•ç‹¬æµ·æŸï¼ˆéƒ¨åˆ†æŸå¤±ï¼‰â€ã€‚è¿™å±äºæ°´æ¸é™©èŒƒå›´ã€‚" } },
             { id: 25, level: 1, chapter: "ç¬¬å…­ç«  ä¿é™©", type: "choice", front: "æ°´æ¸é™© (WPA) è´£ä»»", back: "å¹³å®‰é™© + **è‡ªç„¶ç¾å®³** é€ æˆçš„å•ç‹¬æµ·æŸï¼ˆéƒ¨åˆ†æŸå¤±ï¼‰ã€‚", quiz: { q: "æ°´æ¸é™©æ¯”å¹³å®‰é™©å¤šä¿äº†ä»€ä¹ˆï¼Ÿ", options: ["å·çªƒé™©", "è‡ªç„¶ç¾å®³é€ æˆçš„éƒ¨åˆ†æŸå¤±", "æˆ˜äº‰é™©", "ä¸€åˆ‡å¤–æ¥é£é™©"], ans: 1, explain: "WPA = FPA + è‡ªç„¶ç¾å®³çš„éƒ¨åˆ†æŸå¤±ã€‚" } },
             { id: 26, level: 1, chapter: "ç¬¬å…­ç«  ä¿é™©", type: "choice", front: "ä¸€åˆ‡é™© (All Risks) è´£ä»»", back: "æ°´æ¸é™© + **ä¸€èˆ¬å¤–æ¥åŸå› **ï¼ˆå¦‚å·çªƒã€ç ´ç¢ï¼‰ã€‚<br>æ³¨æ„ï¼šä¸èµ”æˆ˜äº‰ã€ç½¢å·¥ç­‰ç‰¹æ®Šé£é™©ã€‚", quiz: { q: "ä¸€åˆ‡é™©æ˜¯å¦èµ”å¿æˆ˜äº‰é£é™©ï¼Ÿ", options: ["èµ”å¿", "ä¸èµ”å¿", "çœ‹æƒ…å†µ", "èµ”ä¸€åŠ"], ans: 1, explain: "æˆ˜äº‰ã€ç½¢å·¥å±äºç‰¹æ®Šé™„åŠ é™©ï¼Œä¸€åˆ‡é™©ä¸åŒ…å«ï¼Œéœ€å•ç‹¬åŠ ä¿ã€‚" } },
             { id: 27, level: 1, chapter: "ç¬¬å…­ç«  ä¿é™©", type: "calc", front: "ä¿é™©é‡‘é¢è®¡ç®—", back: "ä¿é™©é‡‘é¢ = CIF (æˆ–CIP) ä»· Ã— (1 + æŠ•ä¿åŠ æˆç‡)ã€‚<br>æƒ¯ä¾‹åŠ æˆç‡ä¸º 10%ã€‚", quiz: { q: "CIFä»·ä¸º1000ç¾å…ƒï¼ŒåŠ æˆ10%æŠ•ä¿ï¼Œè´¹ç‡1%ã€‚ä¿è´¹æ˜¯å¤šå°‘ï¼Ÿ", options: ["10", "11", "100", "110"], ans: 1, explain: "ä¿é¢ = 1000 * 1.1 = 1100ã€‚ä¿è´¹ = 1100 * 1% = 11ç¾å…ƒã€‚" } },
             { id: 28, level: 1, chapter: "ç¬¬ä¸ƒç«  ç»“ç®—", type: "choice", front: "æ‰˜æ”¶ (Collection) æ€§è´¨", back: "**å•†ä¸šä¿¡ç”¨**ã€‚é“¶è¡Œä¸æ‰¿æ‹…ä»˜æ¬¾è´£ä»»ï¼Œä¸å«æ¬¾ã€‚", quiz: { q: "æ‰˜æ”¶ä¸šåŠ¡ä¸­ï¼Œé“¶è¡Œçš„è§’è‰²æ˜¯ï¼š", options: ["ä¿è¯ä»˜æ¬¾", "ç¬¬ä¸€ä»˜æ¬¾äºº", "ä»£ç†äººï¼ˆä¸ä¿ä»˜ï¼‰", "ç›‘ç£äºº"], ans: 2, explain: "æ‰˜æ”¶æ˜¯å•†ä¸šä¿¡ç”¨ï¼Œé“¶è¡Œä»…ä½œä¸ºä»£ç†äººå¤„ç†å•æ®ï¼Œä¸æ‰¿æ‹…ä»˜æ¬¾è´£ä»»ã€‚" } },
             { id: 29, level: 1, chapter: "ç¬¬ä¸ƒç«  ç»“ç®—", type: "choice", front: "D/A (æ‰¿å…‘äº¤å•) é£é™©", back: "å¯¹å‡ºå£å•† **é£é™©æœ€å¤§**ã€‚ä¹°æ–¹åªè¦æ‰¿è¯ºä»˜æ¬¾å³å¯æ‹¿è´§ï¼Œç±»ä¼¼èµŠé”€ã€‚", quiz: { q: "å‡ºå£å•†é£é™©æœ€å¤§çš„æ”¯ä»˜æ–¹å¼æ˜¯ï¼š", options: ["L/C", "D/P at sight", "D/P after sight", "D/A"], ans: 3, explain: "D/Aä¸‹ä¹°æ–¹æ‰¿å…‘åå³æ‹¿èµ°è´§æƒï¼Œè‹¥åˆ°æœŸä¸ä»˜ï¼Œå‡ºå£å•†é’±è´§ä¸¤ç©ºã€‚" } },
             { id: 30, level: 1, chapter: "ç¬¬ä¸ƒç«  ç»“ç®—", type: "choice", front: "ä¿¡ç”¨è¯ (L/C) æ€§è´¨", back: "**é“¶è¡Œä¿¡ç”¨**ã€‚å¼€è¯è¡Œè´Ÿç¬¬ä¸€æ€§ä»˜æ¬¾è´£ä»»ã€‚", quiz: { q: "ä¿¡ç”¨è¯ä¸‹ï¼Œè‹¥ç”³è¯·äººï¼ˆä¹°æ–¹ï¼‰ç ´äº§ï¼Œå¼€è¯è¡Œèƒ½å¦æ‹’ä»˜ï¼Ÿ", options: ["èƒ½", "ä¸èƒ½", "å¯ä»¥ç”³è¯·å»¶ä»˜", "çœ‹æ³•é™¢åˆ¤å†³"], ans: 1, explain: "L/Cæ˜¯é“¶è¡Œä¿¡ç”¨ï¼Œå¼€è¯è¡Œæ‰¿æ‹…ç¬¬ä¸€æ€§ä»˜æ¬¾è´£ä»»ï¼Œå¿…é¡»ä»˜æ¬¾ã€‚" } },
             { id: 31, level: 2, chapter: "ç¬¬äºŒç«  å•†å“", type: "choice", front: "FAQ (è‰¯å¥½å¹³å‡å“è´¨)", back: "Fair Average Qualityã€‚é€‚ç”¨äº**å†œå‰¯äº§å“**ï¼ˆå¤§è·¯è´§ï¼‰ã€‚", quiz: { q: "FAQæ ‡å‡†é€šå¸¸é€‚ç”¨äºå“ªç±»å•†å“ï¼Ÿ", options: ["ç²¾å¯†ä»ªå™¨", "å†œå‰¯äº§å“", "åŒ–å·¥å“", "è‰ºæœ¯å“"], ans: 1, explain: "FAQ = è‰¯å¥½å¹³å‡å“è´¨ï¼Œå¸¸ç”¨äºè°·ç‰©ã€æ£‰èŠ±ç­‰å†œäº§å“ã€‚" } },
             { id: 32, level: 2, chapter: "ç¬¬äºŒç«  å•†å“", type: "choice", front: "å‡­æ ·å“ä¹°å–è¦æ±‚", back: "å–æ–¹æ‰€äº¤è´§ç‰©å¿…é¡»ä¸æ ·å“**å®Œå…¨ä¸€è‡´**ã€‚", quiz: { q: "å‡­æ ·å“ä¹°å–ä¸­ï¼Œäº¤è´§å“è´¨çš„å”¯ä¸€ä¾æ®æ˜¯ï¼š", options: ["æ–‡å­—è¯´æ˜", "æ ·å“", "å›½é™…æ ‡å‡†", "å£å¤´çº¦å®š"], ans: 1, explain: "æ ·å“æ˜¯æ ¸å¿ƒæ ‡å‡†ã€‚" } },
             { id: 33, level: 2, chapter: "ç¬¬å››ç«  ä»·æ ¼", type: "choice", front: "ä½œä»·æ–¹æ³•", back: "1. å›ºå®šä»·æ ¼ 2. éå›ºå®šä»·æ ¼ 3. æ»‘åŠ¨ä»·æ ¼", quiz: { q: "åœ¨å¸‚ä»·å‰§çƒˆæ³¢åŠ¨æ—¶ï¼Œä¸ºå‡å°‘é£é™©ï¼Œå¯é‡‡ç”¨ï¼š", options: ["å›ºå®šä»·æ ¼", "éå›ºå®šä»·æ ¼ï¼ˆæš‚å®šä»·æ ¼ï¼‰", "ä¸€æ¬¡æ€§ä¹°æ–­", "é•¿æœŸåˆåŒ"], ans: 1, explain: "éå›ºå®šä»·æ ¼å…è®¸åœ¨è£…èˆ¹æ—¶æˆ–äº¤è´§æ—¶æŒ‰å¸‚ä»·è°ƒæ•´ã€‚" } },
             { id: 34, level: 2, chapter: "ç¬¬å››ç«  ä»·æ ¼", type: "calc", front: "ä½£é‡‘è®¡ç®—", back: "å«ä½£ä»· = å‡€ä»· / (1 - ä½£é‡‘ç‡)ã€‚", quiz: { q: "å‡€ä»·100ï¼Œä½£é‡‘ç‡5%ã€‚å«ä½£ä»·æ˜¯ï¼š", options: ["105", "105.26", "95", "100.5"], ans: 1, explain: "100 / (1-0.05) = 100/0.95 â‰ˆ 105.26ã€‚" } },
             { id: 35, level: 2, chapter: "ç¬¬ä¸ƒç«  ç»“ç®—", type: "choice", front: "æ±‡ä»˜ç§ç±»", back: "ä¿¡æ±‡(M/T)ã€ç”µæ±‡(T/T)ã€ç¥¨æ±‡(D/D)ã€‚", quiz: { q: "ç›®å‰å›½é™…è´¸æ˜“ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„æ±‡ä»˜æ–¹å¼æ˜¯ï¼š", options: ["M/T", "T/T", "D/D", "Check"], ans: 1, explain: "T/T (ç”µæ±‡) é€Ÿåº¦å¿«ï¼Œæœ€å¸¸ç”¨ã€‚" } },
             { id: 36, level: 2, chapter: "ç¬¬å…«ç«  äº‰è®®", type: "choice", front: "æ£€éªŒåœ°ç‚¹", back: "å¸¸ç”¨ï¼š**å‡ºå£å›½æ£€éªŒï¼Œè¿›å£å›½å¤éªŒ**ã€‚", quiz: { q: "å…¼é¡¾ä¹°å–åŒæ–¹åˆ©ç›Šçš„æ£€éªŒæƒè§„å®šæ˜¯ï¼š", options: ["ä»¥ç¦»å²¸å“è´¨ä¸ºå‡†", "ä»¥åˆ°å²¸å“è´¨ä¸ºå‡†", "ç¦»å²¸æ£€éªŒï¼Œåˆ°å²¸å¤éªŒ", "ç¬¬ä¸‰æ–¹ä»²è£"], ans: 2, explain: "å‡ºå£æ£€éªŒä½œä¸ºäº¤è´§ä¾æ®ï¼Œè¿›å£å¤éªŒä½œä¸ºç´¢èµ”ä¾æ®ã€‚" } },
             { id: 37, level: 2, chapter: "ç¬¬ä¹ç«  ç£‹å•†", type: "choice", front: "å‘ç›˜ä¸æ¥å—", back: "äº¤æ˜“è¾¾æˆçš„å¿…ç»ç¯èŠ‚ï¼šå‘ç›˜(Offer) å’Œ æ¥å—(Acceptance)ã€‚", quiz: { q: "æ ¹æ®å…¬çº¦ï¼ŒåˆåŒæˆç«‹çš„æ—¶åˆ»æ˜¯ï¼š", options: ["å‘ç›˜å‘å‡ºæ—¶", "æ¥å—ç”Ÿæ•ˆæ—¶", "åˆåŒç­¾å­—æ—¶", "é¢„ä»˜æ¬¾åˆ°è´¦æ—¶"], ans: 1, explain: "æ¥å—ç”Ÿæ•ˆï¼ŒåˆåŒå³å‘Šæˆç«‹ã€‚" } },
             { id: 38, level: 2, chapter: "ç¬¬ä¹ç«  ç£‹å•†", type: "choice", front: "è¿˜ç›˜ (Counter-Offer)", back: "æ³•å¾‹ä¸Šè§†ä¸ºæ‹’ç»åŸå‘ç›˜ï¼Œå¹¶æ„æˆæ–°å‘ç›˜ã€‚", quiz: { q: "ä¹°æ–¹å¯¹å‘ç›˜ä»·æ ¼æå‡ºä¿®æ”¹æ„è§ï¼Œè¿™å±äºï¼š", options: ["æ¥å—", "è¿˜ç›˜", "è¯¢ç›˜", "é‚€è¯·å‘ç›˜"], ans: 1, explain: "å®è´¨æ€§å˜æ›´ï¼ˆå¦‚ä¿®æ”¹ä»·æ ¼ï¼‰æ„æˆè¿˜ç›˜ã€‚" } },
             { id: 39, level: 2, chapter: "ç¬¬äº”ç«  è¿è¾“", type: "choice", front: "æ¸…æ´æå•", back: "æå•ä¸Šæ— ä»»ä½•è´§ç‰©/åŒ…è£…å—æŸçš„æ‰¹æ³¨ã€‚", quiz: { q: "æå•ä¸Šæ‰¹æ³¨â€œåŒ…è£…ç ´æŸâ€å±äºï¼š", options: ["æ¸…æ´æå•", "ä¸æ¸…æ´æå•", "è®°åæå•", "è¿‡æœŸæå•"], ans: 1, explain: "æœ‰ä¸è‰¯æ‰¹æ³¨å³ä¸ºä¸æ¸…æ´æå•ï¼Œé“¶è¡Œé€šå¸¸æ‹’æ”¶ã€‚" } },
             { id: 40, level: 2, chapter: "ç¬¬ä¸ƒç«  ç»“ç®—", type: "choice", front: "L/C å•æ®å®¡æ ¸", back: "åŸåˆ™ï¼šå•å•ä¸€è‡´ï¼Œå•è¯ä¸€è‡´ã€‚", quiz: { q: "é“¶è¡Œå®¡å•æ—¶ï¼Œå‘ç°å•æ®ä¸åˆåŒä¸ç¬¦ï¼Œä½†ä¸ä¿¡ç”¨è¯ç›¸ç¬¦ã€‚é“¶è¡Œåº”ï¼š", options: ["æ‹’ä»˜", "ä»˜æ¬¾", "å’¨è¯¢ä¹°æ–¹", "è¦æ±‚ä¿®æ”¹å•æ®"], ans: 1, explain: "L/Cç‹¬ç«‹äºåˆåŒï¼Œåªè¦å•è¯ä¸€è‡´ï¼Œé“¶è¡Œå¿…é¡»ä»˜æ¬¾ã€‚" } }
        ];

        // ================= çŠ¶æ€ =================
        let currentDeck = [];
        let currentIndex = 0;
        let wrongList = new Set(); // é”™é¢˜é›†

        function startGame() {
            document.getElementById('cover-screen').style.display = 'none';
            document.getElementById('app-container').style.display = 'flex';
            setMode('ordered');
        }

        function exitGame() {
            if(confirm("ç¡®å®šè¦é€€å‡ºå—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸¢å¤±ã€‚")) {
                location.reload(); // ç®€å•é‡è½½é¡µé¢å›å°é¢
            }
        }

        function setMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`m-${mode}`).classList.add('active');

            if (mode === 'ordered') {
                currentDeck = [...db];
            } else if (mode === 'random') {
                currentDeck = [...db].sort(() => Math.random() - 0.5);
            } else if (mode === 'review') {
                currentDeck = db.filter(d => wrongList.has(d.id));
                if (currentDeck.length === 0) {
                    alert("æš‚æ— é”™é¢˜ï¼å·²è‡ªåŠ¨åˆ‡æ¢ä¸ºéšæœºæ¨¡å¼ã€‚");
                    setMode('random');
                    return;
                }
            }
            currentIndex = 0;
            renderCard();
        }

        function renderCard() {
            const cardEl = document.getElementById('flashcard');
            const data = currentDeck[currentIndex];
            const progressEl = document.getElementById('progress-text');
            
            const levelTag = data.level === 1 ? '<span class="tag level-1">â˜…â˜… æ ¸å¿ƒ</span>' : '<span class="tag">â˜… é‡è¦</span>';
            const wrongTag = wrongList.has(data.id) ? '<span class="tag wrong-mark">éœ€å¤ä¹ </span>' : '';

            // æ¸…çˆ½ç‰ˆå¡ç‰‡
            cardEl.innerHTML = `
                <div class="card-face card-front">
                    <div class="card-body">
                        <div class="tag-row">
                            <span class="tag">${data.chapter}</span>
                            ${levelTag}
                            ${wrongTag}
                        </div>
                        <div class="front-text">${data.front}</div>
                    </div>
                    <div class="card-footer">
                        <button class="btn-exercise" onclick="startQuiz(event)">
                            <span>ğŸ¯</span> å¼ºåŒ–ç»ƒä¹ 
                        </button>
                    </div>
                </div>
                <div class="card-face card-back">
                    <div class="card-body" style="justify-content:flex-start;padding-top:20px">
                        <div class="tag-row"><span class="tag" style="background:#e8f5e9;color:#2e7d32">è§£æ</span></div>
                        <div class="back-text">${data.back}</div>
                    </div>
                    <div class="card-footer">
                        <button class="btn-exercise" onclick="startQuiz(event)">
                            <span>ğŸ¯</span> æµ‹ä¸€ä¸‹
                        </button>
                    </div>
                </div>
            `;
            
            cardEl.classList.remove('is-flipped');
            progressEl.innerText = `è¿›åº¦ï¼š${currentIndex + 1} / ${currentDeck.length}`;
        }

        // ç¿»è½¬åŠŸèƒ½ (ç»‘å®šåœ¨å¡ç‰‡å®¹å™¨ä¸Š)
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('is-flipped');
        }

        // å¯¼èˆªåŠŸèƒ½
        function nextCard(isCorrect) {
            const data = currentDeck[currentIndex];
            
            // isCorrect === null ä»£è¡¨â€œä¸‹ä¸€å¼ â€è·³è¿‡ï¼Œä¸å¤„ç†é”™é¢˜é€»è¾‘
            if (isCorrect === true) {
                wrongList.delete(data.id);
            } else if (isCorrect === false) {
                wrongList.add(data.id);
            }

            if (currentIndex < currentDeck.length - 1) {
                currentIndex++;
                renderCard();
            } else {
                alert("æœ¬ç»„å¤ä¹ å®Œæ¯•ï¼");
                if(currentDeck.length > 1) {
                    if(confirm("æ˜¯å¦é‡æ–°æ‰“ä¹±å¼€å§‹ï¼Ÿ")) setMode('random');
                }
            }
        }

        // ================= å¼ºåŒ–ç»ƒä¹  =================
        function startQuiz(e) {
            e.stopPropagation(); // é˜»æ­¢å¡ç‰‡ç¿»è½¬
            const data = currentDeck[currentIndex];
            const quiz = data.quiz;

            document.getElementById('quiz-question').innerText = quiz.q;
            
            const badge = document.getElementById('quiz-badge');
            if (data.type === 'calc') { badge.className = 'quiz-type type-calc'; badge.innerText = "é«˜éš¾è®¡ç®—"; }
            else if (data.type === 'case') { badge.className = 'quiz-type type-case'; badge.innerText = "æ¡ˆä¾‹åˆ†æ"; }
            else { badge.className = 'quiz-type type-choice'; badge.innerText = "çŸ¥è¯†è¾¨æ"; }

            const optDiv = document.getElementById('quiz-options');
            optDiv.innerHTML = quiz.options.map((opt, i) => `
                <button class="opt-btn" onclick="checkAnswer(${i}, ${quiz.ans})">
                    ${String.fromCharCode(65+i)}. ${opt}
                </button>
            `).join('');

            const feedback = document.getElementById('quiz-feedback');
            feedback.style.display = 'none';
            feedback.innerHTML = `<strong>è§£æï¼š</strong>${quiz.explain}`;

            document.getElementById('quiz-modal').style.display = 'flex';
        }

        function checkAnswer(selected, correct) {
            if(document.querySelector('.opt-btn.correct')) return; 

            const btns = document.querySelectorAll('.opt-btn');
            const data = currentDeck[currentIndex];

            if (selected === correct) {
                btns[selected].classList.add('correct');
                document.getElementById('quiz-feedback').innerHTML = `<span style="color:green;font-weight:bold">âœ… å›ç­”æ­£ç¡®ï¼</span><br>` + document.getElementById('quiz-feedback').innerHTML;
            } else {
                btns[selected].classList.add('wrong');
                btns[correct].classList.add('correct');
                document.getElementById('quiz-feedback').innerHTML = `<span style="color:red;font-weight:bold">âŒ å›ç­”é”™è¯¯</span> (å·²åŠ å…¥é”™é¢˜æœ¬)<br>` + document.getElementById('quiz-feedback').innerHTML;
                
                // æ ¸å¿ƒé€»è¾‘ï¼šå¼ºåŒ–é¢˜åšé”™ = å¡ç‰‡æ²¡æŒæ¡
                wrongList.add(data.id);
                renderCard(); // åˆ·æ–°ç•Œé¢ï¼Œæ˜¾ç¤ºâ€œéœ€å¤ä¹ â€æ ‡ç­¾
            }
            document.getElementById('quiz-feedback').style.display = 'block';
        }

        function closeQuiz() { document.getElementById('quiz-modal').style.display = 'none'; }

        // ================= æŠ¥å‘Š =================
        function showReport() {
            const list = document.getElementById('r-wrong-list');
            list.innerHTML = '';
            
            document.getElementById('r-total').innerText = currentIndex + (currentDeck.length === 40 ? 0 : 1);
            document.getElementById('r-wrong').innerText = wrongList.size;

            if (wrongList.size === 0) {
                list.innerHTML = '<div style="text-align:center;color:#999">æš‚æ— é”™é¢˜ï¼Œç»§ç»­ä¿æŒï¼</div>';
            } else {
                db.filter(d => wrongList.has(d.id)).forEach(d => {
                    list.innerHTML += `
                        <div class="wrong-item">
                            <div>${d.front}</div>
                            <span style="font-size:0.8rem;color:#777">${d.chapter}</span>
                        </div>
                    `;
                });
            }
            document.getElementById('report-modal').style.display = 'flex';
        }

        function exportPDF() {
            const el = document.getElementById('pdf-area');
            html2pdf().from(el).save('å›½é™…è´¸æ˜“å­¦ä¹ æŠ¥å‘Š.pdf');
        }
    </script>
</body>
</html>